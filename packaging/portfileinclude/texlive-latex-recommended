# beamer requires pgf; see #25478
depends_lib-append port:pgf

pre-activate {
    # Handle conflicts for TL2017 upgrade
    # no version check on the first two; the ports are obsolete
    if { ![catch {set vers [lindex [registry_active texlive-htmlxml] 0]}] } {
        registry_deactivate_composite texlive-htmlxml "" [list ports_nodepcheck 1]
    }
    if { ![catch {set vers [lindex [registry_active texlive-math-extra] 0]}] } {
        registry_deactivate_composite texlive-math-extra "" [list ports_nodepcheck 1]
    }

    if { ![catch {set vers [lindex [registry_active texlive-xetex] 0]}]
         && ([vercmp [lindex $vers 1] 44370] < 0) } {
        registry_deactivate_composite texlive-xetex "" [list ports_nodepcheck 1]
    }
    if { ![catch {set vers [lindex [registry_active texlive-latex-extra] 0]}]
         && ([vercmp [lindex $vers 1] 44430] < 0) } {
        registry_deactivate_composite texlive-latex-extra "" [list ports_nodepcheck 1]
    }



    # Handle conflicts for TL2015 upgrade
    if { ![catch {set vers [lindex [registry_active texlive-humanities] 0]}]
         && ([vercmp [lindex $vers 1] 37330] < 0) } {
        registry_deactivate_composite texlive-humanities "" [list ports_nodepcheck 1]
    }
}

